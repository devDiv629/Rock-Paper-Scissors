#:kivy 2.0.0
#:import NoTransition kivy.uix.screenmanager

<MainMenu>:
    Widget:
        opacity: 0.8
        canvas.before:
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'Images/bg.png'

    Widget:
        Button:
            size: dp(40), dp(40)
            background_color: 0, 0, 0, 0
            pos: root.width - self.width - dp(10), root.height - self.height - dp(10)
            on_release: root.toggle_music()
            Image:
                id: audio_switch_btn
                size: self.parent.size
                source: 'Images/audio_on.png'
                center: self.parent.center
    Widget:
        Image:
            source: 'Images/title.png'
            size: root.width, root.height / 2.5
            pos: 0, root.height - self.height

        Button:
            text: 'Play'
            background_normal: ''
            font_name: 'Fonts/moonhouse.ttf'
            color: 4/255, 66/255, 33/255
            font_size: dp(30)
            background_color: 92/255, 147/255, 237/255, 0.8
            size: root.width * .7, dp(50)
            pos: root.center_x - self.width / 2, root.center_y - self.height / 2
            on_press: root.click_sound.play()
            on_release: root.manager.current = 'Enter Name'

        Button:
            text: 'Rules'
            background_normal: ''
            font_name: 'Fonts/moonhouse.ttf'
            color: 4/255, 66/255, 33/255
            font_size: dp(30)
            background_color: 92/255, 147/255, 237/255, 0.8
            size: root.width * .7, dp(50)
            pos: root.center_x - self.width / 2, root.center_y - self.height - dp(40)
            on_press: root.click_sound.play()

        Button:
            text: 'Credits'
            background_normal: ''
            font_name: 'Fonts/moonhouse.ttf'
            color: 4/255, 66/255, 33/255
            font_size: dp(30)
            background_color: 92/255, 147/255, 237/255, 0.8
            size: root.width * .7, dp(50)
            pos: root.center_x - self.width / 2, root.center_y - self.height - dp(105)
            on_press: root.click_sound.play()

        Button:
            text: 'Quit'
            background_normal: ''
            font_name: 'Fonts/moonhouse.ttf'
            font_size: dp(30)
            color: 1, 0, 0
            background_color: 92/255, 147/255, 237/255, 0.8
            size: root.width * .7, dp(50)
            pos: root.center_x - self.width / 2, root.center_y - self.height - dp(170)
            on_release: root.quit_game()
            on_press: root.click_sound.play()


<EnterName>:
    Widget:
        opacity: 0.8
        canvas.before:
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'Images/bg.png'

    Widget:
        Button:
            size: dp(40), dp(40)
            background_color: 0, 0, 0, 0
            pos: dp(10), root.height - self.height - dp(10)
            on_press:
                root.click_sound.play()
                self.opacity = 0.5
            on_touch_up: self.opacity = 1
            on_release: root.manager.current = 'Main Menu'
            Image:
                size: self.parent.size
                source: 'Images/back_button.png'
                center: self.parent.center

        Image:
            id: robot
            source: 'Images/ask_name.png'
            size: dp(180), dp(180)
            pos: root.center_x - self.width / 2, root.center_y + self.height / 2

        Label:
            text: "Your name"
            font_name: 'Fonts/polygon_party.ttf'
            color: 0, 1, 0
            font_size: dp(25)
            center_x: root.center_x
            center_y: root.center_y + self.height / 2

        TextInput:
            id: username
            background_normal: ''
            background_color: 175/255, 219/255, 191/255, 0.7
            foreground_color: 245/255, 215/255, 227/255
            cursor_color: 1, 1, 0
            hint_text: "Player"
            size: root.width * .8, dp(40)
            font_name: 'Fonts/galiver_sans.ttf'
            font_size: dp(20)
            halign: 'center'
            pos: root.center_x - self.width / 2, root.center_y - self.height / 2
            multiline: False
            on_text: root.validate_username()

        Button:
            id: start_button
            text: 'START'
            font_name: 'Fonts/moonhouse.ttf'
            font_size: dp(25)
            color: 4/255, 66/255, 33/255
            background_normal: ''
            background_color: 92/255, 147/255, 237/255, 0.8
            size: root.width * 0.6, dp(40)
            pos: root.center_x - self.width / 2, root.center_y - self.height - dp(50)
            on_release:
                root.begin_sound.play()
                root.manager.current = 'Blank Screen'
                root.begin_game()

<MainGame>:
    message: message
    round_on_screen: round_number
    user_name: user_name
    user_points: user_points
    user_choice_text: user_choice_text
    computer_points: computer_points
    computer_choice_text: computer_choice_text
    select_rock: select_rock
    select_paper: select_paper
    select_scissor: select_scissor
    play_again_button: play_again

    Widget:
        id: background_image
        opacity: 0.8
        canvas.before:
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'Images/bg.png'

    Widget:
        Button:
            id: switch_to_home
            size: dp(40), dp(40)
            background_color: 0, 0, 0, 0
            pos: dp(10), root.height - self.height - dp(10)
            on_press:
                if self.opacity != 0.4: root.click_sound.play()
                if self.opacity != 0.4: self.opacity = 0.5
            on_touch_up: if self.opacity != 0.4: self.opacity = 1
            on_release: root.show_exit_prompt()
            Image:
                size: self.parent.size
                source: 'Images/exit.png'
                center: self.parent.center

        Button:
            id: pause_game
            size: dp(40), dp(40)
            background_color: 0, 0, 0, 0
            pos: root.width - self.width - dp(10), root.height - self.height - dp(13)
            on_press: if self.opacity != 0.4: self.opacity = 0.5
            on_touch_up: if self.opacity != 0.4: self.opacity = 1
            on_release: root.pause_game()
            Image:
                size: self.parent.size
                source: 'Images/pause.png'
                center: self.parent.center

    Widget:
        id: game_actions
        Label:
            id: round_number
            text: 'ROUND 1'
            font_name: 'Fonts/evil_empire.ttf'
            color: 1, 1, 0
            opacity: 0
            size: self.texture_size
            font_size: dp(35)
            center_x: root.center_x
            center_y: root.top - self.height * 2
            on_size: self.center_x = root.center_x

        Label:
            id: user_name
            center_x: root.width / 4
            center_y: root.height - round_number.height - self.height
            color: 115/255, 247/255, 214/255
            font_size: dp(22)
            font_name: "Fonts/buggie.ttf"

        Label:
            id: user_points
            text: "0"
            size: self.texture_size
            center_x: root.width / 4
            center_y: root.height - round_number.height - user_name.height - self.height - dp(10)
            on_size: self.center_x = root.width / 4
            color: 239/255, 196/255, 59/255
            font_size: dp(25)
            font_name: "Fonts/buggie.ttf"

        Label:
            id: user_choice_text
            size: self.texture_size
            on_size: self.center_x = root.width / 4
            center_x: root.width / 4
            center_y: root.height - round_number.height - user_name.height - user_points.height - self.height - dp(30)
            color: 203/255, 158/255, 249/255
            font_size: dp(22)
            font_name: "Fonts/gratison.otf"

        Label:
            id: computer_name
            text: "Computer"
            center_x: root.width * 3 / 4
            center_y: root.height - round_number.height - self.height
            color: 115/255, 247/255, 214/255
            font_size: dp(22)
            font_name: "Fonts/buggie.ttf"

        Label:
            id: computer_points
            text: "0"
            size: self.texture_size
            center_x: root.width * 3 / 4
            center_y: root.height - round_number.height - computer_name.height -  self.height - dp(10)
            on_size: self.center_x = root.width * 3 / 4
            color: 239/255, 196/255, 59/255
            font_size: dp(25)
            font_name: "Fonts/buggie.ttf"

        Label:
            id: computer_choice_text
            size: self.texture_size
            center_x: root.width * 3 / 4
            center_y: root.height - round_number.height - computer_name.height - computer_points.height - self.height - dp(30)
            on_size: self.center_x = root.width * 3 / 4
            color: 203/255, 158/255, 249/255
            font_size: dp(22)
            font_name: "Fonts/gratison.otf"

        Label:
            id: message
            text: "Game starting..."
            font_size: dp(22)
            font_name: "Fonts/cano.ttf"
            center_x: root.center_x
            center_y: select_paper.pos[1] - self.height / 2

        Button:
            id: select_rock
            background_color: 0, 0, 0, 0
            size: dp(60), dp(60)
            center: root.center
            disabled: True
            opacity: 0.7
            on_press: if root.game_playable == True: self.opacity = 0.5
            on_touch_up: if self.opacity == 0.5: self.opacity = 1
            on_release:
                if root.game_playable == True: root.rock_clicked_sound.play()
                if root.game_playable == True: root.toggle_buttons_state()
                if root.game_playable == True: root.compare_choices(1)
            Image:
                source: 'Images/rock.png'
                center: self.parent.center

        Button:
            id: select_paper
            background_color: 0, 0, 0, 0
            size: dp(60), dp(60)
            center_x: root.width / 4
            center_y: select_rock.pos[1] - self.height
            disabled: True
            opacity: 0.7
            on_press: if root.game_playable == True: self.opacity = 0.5
            on_touch_up: if self.opacity == 0.5: self.opacity = 1
            on_release:
                if root.game_playable == True: root.paper_clicked_sound.play()
                if root.game_playable == True: root.toggle_buttons_state()
                if root.game_playable == True: root.compare_choices(2)
            Image:
                source: 'Images/paper.png'
                center: self.parent.center

        Button:
            id: select_scissor
            background_color: 0, 0, 0, 0
            size: dp(60), dp(60)
            center_x: root.width * 3 / 4
            center_y: select_rock.pos[1] - self.height
            disabled: True
            opacity: 0.7
            on_press: if root.game_playable == True: self.opacity = 0.5
            on_touch_up: if self.opacity == 0.5: self.opacity = 1
            on_release:
                if root.game_playable == True: root.scissor_clicked_sound.play()
                if root.game_playable == True: root.toggle_buttons_state()
                if root.game_playable == True: root.compare_choices(3)
            Image:
                source: 'Images/scissor.png'
                center: self.parent.center

        Button:
            id: play_again
            text: "Play Again"
            disabled: True
            size: root.width * 0.9, dp(40)
            center_x: root.center_x
            center_y: message.pos[1]
            on_size: self.center_x = root.center_x
            background_normal: ''
            font_name: 'Fonts/moonhouse.ttf'
            color: 4/255, 66/255, 33/255
            font_size: dp(30)
            background_color: 92/255, 147/255, 237/255
            opacity: 0
            on_release: root.play_again()

<ExitPrompt>:
    Widget:
        id: exit_prompt_background
        canvas:
            Color:
                rgba: 1, 1, 1, 0.8
            Rectangle:
                pos: self.center_x - (root.width * 0.8) / 2, self.center_y - (root.height / 4) / 2
                size: root.width * 0.8, root.height / 4

        Label:
            text: 'Return to Main Menu'
            color: 222/255, 47/255, 99/255
            font_name: 'Fonts/polygon_party.ttf'
            font_size: root.width * 0.06
            center_x: exit_prompt_background.center_x
            center_y: exit_prompt_background.center_y + self.height * 0.4

        Button:
            text: 'NO'
            size: root.width / 4, root.height / 12
            center_x: exit_prompt_background.center_x - self.width * 0.8
            center_y: exit_prompt_background.center_y - self.height / 2
            background_normal: ''
            background_color: 92/255, 147/255, 237/255, 0.8
            color: 4/255, 66/255, 33/255
            font_name: 'Fonts/moonhouse.ttf'
            on_press: root.click_sound.play()
            on_release: root.remove_prompt()

        Button:
            text: 'YES'
            size: root.width / 4, root.height / 12
            center_x: exit_prompt_background.center_x + self.width * 0.8
            center_y: exit_prompt_background.center_y - self.height / 2
            background_normal: ''
            background_color: 92/255, 147/255, 237/255, 0.8
            color: 4/255, 66/255, 33/255
            font_name: 'Fonts/moonhouse.ttf'
            on_press: root.click_sound.play()
            on_release: root.go_to_main_menu()

<PauseScreen>:
    Widget:
        Label:
            text: 'PAUSED'
            center_x: root.center_x
            center_y: root.height - self.height
            font_name: 'Fonts/moonhouse.ttf'
            font_size: dp(25)

        Button:
            text: 'Resume'
            size: root.width * 0.8, dp(40)
            center: root.center
            on_size: self.center = root.center
            background_normal: ''
            background_color: 92/255, 147/255, 237/255, 0.8
            color: 4/255, 66/255, 33/255
            font_name: 'Fonts/moonhouse.ttf'
            font_size: dp(30)
            on_release: root.resume_game()